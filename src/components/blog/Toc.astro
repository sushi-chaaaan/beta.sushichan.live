---
import type { MarkdownHeading } from "astro"

import Link from "@/components/base/Link.astro"
type Props = {
  depth: number
  headings: MarkdownHeading[]
}

const { depth, headings } = Astro.props
const matchedHeadings = headings.filter((heading) => heading.depth === depth)
---

<nav class="flex flex-col gap-4 rounded-lg bg-zinc-200 p-4 dark:bg-zinc-700/60">
  <p class="text-2xl font-bold">目次</p>
  <div
    class="flex flex-col flex-nowrap justify-center gap-1 rounded-lg text-lg font-bold"
  >
    {
      matchedHeadings.map((h, i) => (
        <Fragment>
          <Link
            variants={{
              color: "primary",
              decoration: "none",
              hoverColor: "primary",
            }}
            href={`#${h.slug}`}
          >
            <span>{h.text}</span>
          </Link>
          {i !== matchedHeadings.length - 1 && <div class="divider my-0" />}
        </Fragment>
      ))
    }
  </div>
</nav>
