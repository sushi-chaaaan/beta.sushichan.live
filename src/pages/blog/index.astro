---
import ContentLayout from "@/components/common/ContentLayout.astro"
import BaseLayout from "@/layouts/BaseLayout.astro"
import Link from "@/components/base/Link.astro"
import CloudinaryImage from "@/components/ui/CloudinaryImage.astro"
import BaseSEO from "@/components/meta/BaseSEO.astro"
import { getAllPosts } from "@/lib/blogPost"

const posts = await getAllPosts()

export const prerender = true
---

<BaseLayout>
  <BaseSEO
    description="いろいろ書いているブログ"
    slot="seo"
    title="すしにっき"
    disableTitleTemplate
  />
  <ContentLayout>
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      {
        posts.map(({ data, slug }) => (
          <Link href={`/blog/post/${slug}`} rel="prefetch">
            <span class="flex flex-col flex-nowrap rounded-lg border p-2">
              <CloudinaryImage
                alt={`thumbnail of ${slug}`}
                fetchPriority="high"
                src={data.thumbnail}
              />
              <h2>{data.title}</h2>
            </span>
          </Link>
        ))
      }
    </div>
  </ContentLayout>
</BaseLayout>
